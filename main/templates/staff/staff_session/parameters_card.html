<div class="card">                  
    <div class="card-header">                
        <span class="align-middle">Parameters</span>       
            

        <span class="float-end">
            <span v-show="reconnecting" class="me-1">
                Connecting <i class="fas fa-cog fa-spin fa-1x"></i>
            </span>
            <button class="btn btn-outline-primary me-1" type="button" v-on:click = "downloadParameterset()" title="Download to a file.">
                <span v-html = "downloadParametersetButtonText"></span>
            </button> 
            <button class="btn btn-outline-primary me-1" type="button" v-bind:disabled = "session.started" v-on:click = "showUploadParameters('parameters')" title = "Upload from a file.">
                Upload  <i class="fas fa-upload"></i>
            </button> 
            <button class="btn btn-outline-primary me-1" type="button" v-bind:disabled = "session.started" v-on:click = "showImportParameters()" title="Import from another session.">
                Import <i class="fas fa-file-import"></i>
            </button> 
        </span>

        
    </div>
    <div class="card-body"> 

        <!-- change count -->
        <div class="row mb-4">
            <div class="col-md text-center">
                <label for="period_count">Number of Periods</label>
                
                <div class = "d-flex justify-content-center">
                    <div class="input-group w-50">
                        <button class="btn btn-outline-secondary" 
                                type="button" 
                                v-bind:disabled="reconnecting || working || session.parameter_set.number_of_periods <= 1"
                                v-on:click="sendUpdatePeriodCount(-1)">-</button>
                        <input type="number"
                               id="period_count"  
                               class="form-control text-center"
                               disabled=true
                               style="background-color: white;"
                               v-model="session.parameter_set.number_of_periods">                    
                        <button class="btn btn-outline-secondary"
                                v-bind:disabled="reconnecting || working"
                                v-on:click="sendUpdatePeriodCount(1)"
                                type="button">+</button>
                    </div>
                </div>
            </div>
            <div class="col-md text-center">
                <label for="period_count">Period Visible</label>
                <div class = "d-flex justify-content-center">
                    <div class="input-group w-50">
                        <button class="btn btn-outline-secondary" 
                                type="button" 
                                v-bind:disabled="reconnecting || working || current_period <= 1"
                                v-on:click="updateCurrentPeriod(-1)"><i class="fas fa-angle-double-left"></i></button>
                        <input type="number"
                               id="period_visible"
                               class="form-control text-center"
                               disabled=true
                               style="background-color: white;"
                               v-model="current_period">                   
                        <button class="btn btn-outline-secondary"
                                v-bind:disabled="reconnecting || working || current_period == session.parameter_set.number_of_periods"
                                v-on:click="updateCurrentPeriod(1)"
                                type="button"><i class="fas fa-angle-double-right"></i></button>
                    </div>
                </div>
            </div>
        </div>  

        <!-- edit values and costs -->
        <div class="row">
            <div class="col-md text-center">
                <table class="table table-hover table-condensed table-responsive-lg"> 
                    <caption class="text-center" style="caption-side:top;">Buyers ([[session.parameter_set.number_of_buyers]])</caption>
                    <thead>
                        <tr>
                            <th scope="col" class = "m-1 p-1">
                                ID
                            </th> 
                            <th scope="col" class = "text-center m-1 p-1">
                                Value 1
                            </th>
                            <th scope="col" class = "text-center m-1 p-1">
                                Value 2
                            </th>
                            <th scope="col" class = "text-center m-1 p-1">
                                Value 3
                            </th>
                            <th scope="col" class = "text-center m-1 p-1">
                                Value 4
                            </th>
                        </tr>
                    </thead>
                    <tbody id="buyer_list">
                        <tr v-for="(b, index) in session.parameter_set.periods[current_period-1].buyers" v-bind:key="b.id">
                            <td>
                                [[b.id_number]]
                            </td>
                            <td v-for="(vc, index) in b.value_costs" v-bind:key="vc.id">
                                <button type="button" class="btn btn-light btn-sm" v-on:click = "showEditValuecost(vc)" >
                                    <span v-if="vc.enabled == 'True'">
                                        [[vc.value_cost]]
                                    </span>
                                    <span v-else>
                                        OFF
                                    </span>
                                </button>                               
                            </td>
                        </tr>
                    </tbody>
                </table>

                <div class="btn-group" role="group" aria-label="Buyer parameters">
                    <button class="btn btn-outline-secondary"
                            type="button"
                            v-bind:disabled="reconnecting || working"
                            v-on:click="sendUpdateSubjectCount('BUYER', 1)"
                            title = "Add a buyer">
                        <i class="fas fa-plus"></i>
                    </button>
                    <button class="btn btn-outline-secondary"
                            type="button"
                            v-bind:disabled="reconnecting || session.parameter_set.periods[current_period-1].buyers.length <= 1 || working"
                            v-on:click="sendUpdateSubjectCount('BUYER', -1)"
                            title = "Remove last Buyer">
                        <i class="fas fa-minus"></i>
                    </button>
                    <button type="button"
                            class="btn btn-outline-secondary"
                            v-on:click="shiftValueOrCost('value','up')"
                            v-bind:disabled="reconnecting || working"
                            title = "Shift values up">
                        <i class="fas fa-angle-double-up"></i>
                    </button>
                    <button type="button"
                            class="btn btn-outline-secondary"
                            v-on:click="shiftValueOrCost('value','down')"
                            v-bind:disabled="reconnecting || working"
                            title = "Shift values down">
                        <i class="fas fa-angle-double-down"></i>
                    </button>
                    <button type="button"
                            class="btn btn-outline-secondary"
                            v-on:click="copyValueOrCost('value')"
                            v-bind:disabled="reconnecting || working || current_period <= 1"
                            title = "Copy values from previous period">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>

            </div>
            <div class="col-md text-center">
                <table class="table table-hover table-condensed table-responsive-lg"> 
                    <caption class="text-center" style="caption-side:top;">Sellers ([[session.parameter_set.number_of_sellers]])</caption>
                    <thead>
                        <tr>
                            <th scope="col" class = "m-1 p-1">
                                ID
                            </th> 
                            <th scope="col" class = "text-center m-1 p-1">
                                Cost 1
                            </th>
                            <th scope="col" class = "text-center m-1 p-1">
                                Cost 2
                            </th>
                            <th scope="col" class = "text-center m-1 p-1">
                                Cost 3
                            </th>
                            <th scope="col" class = "text-center m-1 p-1">
                                Cost 4
                            </th>
                        </tr>
                    </thead>
                    <tbody id="seller_list">
                        <tr v-for="(s, index) in session.parameter_set.periods[current_period-1].sellers" v-bind:key="s.id">
                            <td>
                                [[s.id_number]]
                            </td>
                            <td v-for="(vc, index) in s.value_costs" v-bind:key="vc.id">
                                <button type="button" class="btn btn-light btn-sm" v-on:click = "showEditValuecost(vc)" >
                                    <span v-if="vc.enabled == 'True'">
                                        [[vc.value_cost]]
                                    </span>
                                    <span v-else>
                                        OFF
                                    </span>
                                </button>
                            </td>
                        </tr>
                    </tbody>
                    
                </table>

                <div class="btn-group" role="group" aria-label="Seller parameters">
                    <button class="btn btn-outline-secondary"
                            type="button"
                            v-bind:disabled="reconnecting || working"
                            v-on:click="sendUpdateSubjectCount('SELLER', 1)"
                            title = "Add a buyer">
                        <i class="fas fa-plus"></i>
                    </button>
                    <button class="btn btn-outline-secondary"
                            type="button"
                            v-bind:disabled="reconnecting || session.parameter_set.periods[current_period-1].sellers.length <= 1 || working"
                            v-on:click="sendUpdateSubjectCount('SELLER', -1)"
                            title = "Remove last Buyer">
                        <i class="fas fa-minus"></i>
                    </button>
                    <button type="button"
                            class="btn btn-outline-secondary"
                            v-on:click="shiftValueOrCost('cost','up')"
                            v-bind:disabled="reconnecting || working"
                            title = "Shift values up">
                        <i class="fas fa-angle-double-up"></i>
                    </button>
                    <button type="button"
                            class="btn btn-outline-secondary"
                            v-on:click="shiftValueOrCost('cost','down')"
                            v-bind:disabled="reconnecting || working"
                            title = "Shift values down">
                        <i class="fas fa-angle-double-down"></i>
                    </button>
                    <button type="button"
                            class="btn btn-outline-secondary"
                            v-on:click="copyValueOrCost('cost')"
                            v-bind:disabled="reconnecting || working || current_period <= 1"
                            title = "Copy costs from previous period">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>

            </div>
        </div>                                  
        
        <!-- shift values and costs -->
        <div class="row mt-4">
            <div class="col-md text-center">
                
            </div>

            <div class="col-md text-center">
            </div>
        </div>

        <!-- copy values and costs -->
        <div class="row mt-4">
            <div class="col-md text-center">
            </div>

            <div class="col-md text-center">
            </div>
        </div>
    </div>                    
</div> 